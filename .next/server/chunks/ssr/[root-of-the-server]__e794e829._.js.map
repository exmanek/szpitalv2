{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///C:/szpital/src/app/panelpacjent/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\n\r\ninterface Appointment {\r\n  date: string;\r\n  doctor: string;\r\n  department: string;\r\n  status: 'confirmed' | 'pending' | 'cancelled';\r\n}\r\n\r\nexport default function PanelPacjent() {\r\n  const [patient, setPatient] = useState({\r\n    name: '',\r\n    email: '',\r\n    phone: '',\r\n    patientId: '',\r\n    password: '',\r\n  });\r\n\r\n  const [appointments, setAppointments] = useState<Appointment[]>([]);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n\r\nuseEffect(() => {\r\n  const fetchData = async () => {\r\n    const res = await fetch('/api/me');\r\n    if (res.ok) {\r\n      const userData = await res.json();\r\n      setPatient({\r\n        name: userData.name,\r\n        email: userData.email,\r\n        phone: userData.phone,\r\n        patientId: `PL-${userData.id}`,\r\n        password: '',\r\n      });\r\n    }\r\n  };\r\n  fetchData();\r\n}, []);\r\n\r\n\r\n  const handleChange = (field: string, value: string) => {\r\n    setPatient((prev) => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleSave = () => {\r\n    localStorage.setItem('registeredUser', JSON.stringify(patient));\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const handleCancelAppointment = (index: number) => {\r\n    const confirmed = window.confirm('Czy na pewno chcesz odwołać tę wizytę?');\r\n    if (!confirmed) return;\r\n\r\n    const updatedAppointments = [...appointments];\r\n    updatedAppointments.splice(index, 1);\r\n    setAppointments(updatedAppointments);\r\n    localStorage.setItem('appointments', JSON.stringify(updatedAppointments));\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto py-10 px-4\">\r\n      <h1 className=\"text-3xl font-bold text-blue-600 mb-6\">Panel pacjenta</h1>\r\n\r\n      <div className=\"bg-white rounded-lg shadow p-6 mb-8\">\r\n        <h2 className=\"text-xl font-semibold mb-4\">Dane pacjenta</h2>\r\n\r\n        {isEditing ? (\r\n          <div className=\"space-y-2\">\r\n            {/* edytowalne pola */}\r\n            {['name', 'email', 'phone', 'password'].map((field) => (\r\n              <div key={field}>\r\n                <label className=\"block text-sm capitalize\">\r\n                  {field === 'name' ? 'Imię i nazwisko' : field}\r\n                </label>\r\n                <input\r\n                  type={field === 'email' ? 'email' : field === 'password' ? 'password' : 'text'}\r\n                  value={patient[field as keyof typeof patient]}\r\n                  onChange={(e) => handleChange(field, e.target.value)}\r\n                  className=\"w-full border px-3 py-2 rounded\"\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <p><strong>Imię i nazwisko:</strong> {patient.name}</p>\r\n            <p><strong>E-mail:</strong> {patient.email}</p>\r\n            <p><strong>Telefon:</strong> {patient.phone}</p>\r\n            <p><strong>ID pacjenta:</strong> {patient.patientId || 'PL-0000-000'} </p>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <h2 className=\"text-xl font-semibold mb-4\">Nadchodzące wizyty</h2>\r\n        {appointments.length === 0 ? (\r\n          <p>Brak zaplanowanych wizyt.</p>\r\n        ) : (\r\n          <ul className=\"space-y-4\">\r\n            {appointments.map((appt, index) => (\r\n              <li key={index} className=\"border border-gray-200 rounded p-4 flex justify-between items-start gap-4\">\r\n                <div>\r\n                  <p><strong>Data:</strong> {appt.date}</p>\r\n                  <p><strong>Lekarz:</strong> {appt.doctor}</p>\r\n                  <p><strong>Oddział:</strong> {appt.department}</p>\r\n                  <p>\r\n                    <strong>Status:</strong>{' '}\r\n                    <span\r\n                      className={\r\n                        appt.status === 'confirmed'\r\n                          ? 'text-green-600 font-semibold'\r\n                          : appt.status === 'pending'\r\n                          ? 'text-yellow-600 font-semibold'\r\n                          : 'text-red-600 font-semibold'\r\n                      }\r\n                    >\r\n                      {appt.status === 'confirmed'\r\n                        ? 'Potwierdzona'\r\n                        : appt.status === 'pending'\r\n                        ? 'Oczekująca'\r\n                        : 'Anulowana'}\r\n                    </span>\r\n                  </p>\r\n                </div>\r\n\r\n                {appt.status === 'pending' && (\r\n                  <button\r\n                    onClick={() => handleCancelAppointment(index)}\r\n                    className=\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition\"\r\n                  >\r\n                    Odwołaj\r\n                  </button>\r\n                )}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"mt-8 flex gap-4\">\r\n        <Link href=\"/umowwizyte\">\r\n          <button className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition\">\r\n            Umów wizytę\r\n          </button>\r\n        </Link>\r\n\r\n        {isEditing ? (\r\n          <button\r\n            onClick={handleSave}\r\n            className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition\"\r\n          >\r\n            Zapisz zmiany\r\n          </button>\r\n        ) : (\r\n          <button\r\n            onClick={() => setIsEditing(true)}\r\n            className=\"bg-gray-100 text-gray-800 px-4 py-2 rounded hover:bg-gray-200 transition\"\r\n          >\r\n            Edytuj profil\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}